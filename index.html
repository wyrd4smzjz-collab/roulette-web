<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Roulette Stars</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #1a1a1a; color: white; font-family: 'Segoe UI', sans-serif; text-align: center; margin: 0; overflow-x: hidden; }
        .balance-card { background: #222; padding: 15px; border-bottom: 3px solid #f39c12; display: flex; justify-content: space-between; font-size: 18px; font-weight: bold; }
        
        /* –ö—Ä—É–≥–ª–∞—è —Ä—É–ª–µ—Ç–∫–∞ –Ω–∞ CSS */
        .wheel-box { position: relative; width: 300px; height: 300px; margin: 20px auto; }
        .pointer { position: absolute; top: -15px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 30px solid #f39c12; z-index: 10; filter: drop-shadow(0 0 5px black); }
        
        #wheel { 
            width: 100%; height: 100%; border-radius: 50%; border: 10px solid #444; box-sizing: border-box;
            background: conic-gradient(
                #e74c3c 0deg 45deg, #2ecc71 45deg 90deg, 
                #f1c40f 90deg 135deg, #3498db 135deg 180deg,
                #9b59b6 180deg 225deg, #e67e22 225deg 270deg,
                #1abc9c 270deg 315deg, #34495e 315deg 360deg
            );
            transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1);
            display: flex; align-items: center; justify-content: center; font-size: 60px;
        }

        .controls { padding: 20px; }
        .bet-row { display: flex; justify-content: center; gap: 10px; margin-bottom: 15px; }
        .btn { border: none; border-radius: 12px; color: white; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .btn-bet { background: #333; padding: 10px 20px; border: 2px solid transparent; }
        .btn-bet.active { border-color: #f39c12; background: #444; }
        
        .btn-spin { background: #f39c12; width: 80%; padding: 15px; font-size: 20px; text-transform: uppercase; box-shadow: 0 5px 0 #d35400; margin-bottom: 25px; }
        .btn-spin:active { transform: translateY(3px); box-shadow: 0 2px 0 #d35400; }

        .deposit-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 0 20px 20px; }
        .btn-dep { background: #27ae60; padding: 12px; font-size: 16px; }
    </style>
</head>
<body>
    <div class="balance-card">
        <div>üí∞ <span id="balance">0</span> ‚≠ê</div>
        <div style="color: #f39c12;">–°—Ç–∞–≤–∫–∞: <span id="current-bet">5</span></div>
    </div>

    <div class="wheel-box">
        <div class="pointer"></div>
        <div id="wheel">üé°</div>
    </div>

    <div class="controls">
        <div class="bet-row">
            <button class="btn btn-bet active" onclick="setBet(5, this)">5</button>
            <button class="btn btn-bet" onclick="setBet(20, this)">20</button>
            <button class="btn btn-bet" onclick="setBet(50, this)">50</button>
        </div>
        <button class="btn btn-spin" onclick="startSpin()">–ö—Ä—É—Ç–∏—Ç—å!</button>
    </div>

    <div style="color: #888; margin-bottom: 10px;">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</div>
    <div class="deposit-grid">
        <button class="btn btn-dep" onclick="deposit(10)">10 ‚≠ê</button>
        <button class="btn btn-dep" onclick="deposit(50)">50 ‚≠ê</button>
        <button class="btn btn-dep" onclick="deposit(500)">500 ‚≠ê</button>
        <button class="btn btn-dep" onclick="deposit(5000)">5000 ‚≠ê</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const urlParams = new URLSearchParams(window.location.search);
        let balance = parseInt(urlParams.get('balance')) || 0;
        document.getElementById('balance').innerText = balance;

        let currentBet = 5;

        function setBet(amount, el) {
            currentBet = amount;
            document.getElementById('current-bet').innerText = amount;
            document.querySelectorAll('.btn-bet').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
        }

        function startSpin() {
            if (balance < currentBet) {
                tg.showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤–µ–∑–¥ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ!");
                return;
            }
            const wheel = document.getElementById('wheel');
            const deg = Math.floor(Math.random() * 3600) + 720;
            wheel.style.transform = `rotate(${deg}deg)`;
            
            setTimeout(() => {
                tg.sendData("spin_" + currentBet);
            }, 4000);
        }

        function deposit(amount) {
            tg.sendData("dep_" + amount);
        }
    </script>
</body>
</html>
